<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>呪霊操術 — Cursed Spirit Manipulation</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@400;700;900&family=Space+Mono:wght@400;700&family=Crimson+Pro:ital,wght@0,300;0,400;0,600;1,300&display=swap" rel="stylesheet">
<style>
/* ═══════════════════════════════════════════════════════════
   ROOT & RESET
   ═══════════════════════════════════════════════════════════ */
:root {
  --void: #050508;
  --abyss: #0a0a12;
  --shadow: #12121e;
  --dusk: #1a1a2e;
  --cursed-purple: #6b21a8;
  --cursed-violet: #8b5cf6;
  --cursed-glow: #a78bfa;
  --cursed-faint: #c4b5fd;
  --blood-red: #dc2626;
  --grade-special: #dc2626;
  --grade-1: #f59e0b;
  --grade-2: #3b82f6;
  --grade-3: #22c55e;
  --grade-4: #6b7280;
  --bone: #e8e4df;
  --ash: #9ca3af;
  --smoke: #6b7280;
  --portal-size: 0px;
}

*, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

html {
  scroll-behavior: smooth;
  scrollbar-width: thin;
  scrollbar-color: var(--cursed-purple) var(--void);
}

body {
  background: var(--void);
  color: var(--bone);
  font-family: 'Crimson Pro', serif;
  font-size: 18px;
  line-height: 1.7;
  overflow-x: hidden;
  min-height: 100vh;
}

::selection {
  background: var(--cursed-purple);
  color: white;
}

/* ═══════════════════════════════════════════════════════════
   CURSED ENERGY BACKGROUND PARTICLES
   ═══════════════════════════════════════════════════════════ */
.cursed-bg {
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  pointer-events: none;
  z-index: 0;
  overflow: hidden;
}

.cursed-particle {
  position: absolute;
  width: 2px;
  height: 2px;
  background: var(--cursed-violet);
  border-radius: 50%;
  opacity: 0;
  animation: float-up 8s infinite;
  box-shadow: 0 0 6px var(--cursed-violet), 0 0 12px var(--cursed-purple);
}

@keyframes float-up {
  0% { transform: translateY(100vh) scale(0); opacity: 0; }
  10% { opacity: 0.6; }
  90% { opacity: 0.3; }
  100% { transform: translateY(-10vh) scale(1.5); opacity: 0; }
}

.cursed-particle:nth-child(1) { left: 3%; animation-delay: 0s; animation-duration: 7s; }
.cursed-particle:nth-child(2) { left: 8%; animation-delay: 1.2s; animation-duration: 9s; }
.cursed-particle:nth-child(3) { left: 14%; animation-delay: 0.5s; animation-duration: 6s; }
.cursed-particle:nth-child(4) { left: 19%; animation-delay: 2.8s; animation-duration: 11s; }
.cursed-particle:nth-child(5) { left: 25%; animation-delay: 1.7s; animation-duration: 8s; }
.cursed-particle:nth-child(6) { left: 31%; animation-delay: 3.1s; animation-duration: 7.5s; }
.cursed-particle:nth-child(7) { left: 37%; animation-delay: 0.8s; animation-duration: 10s; }
.cursed-particle:nth-child(8) { left: 42%; animation-delay: 4.2s; animation-duration: 6.5s; }
.cursed-particle:nth-child(9) { left: 48%; animation-delay: 2.0s; animation-duration: 9.5s; }
.cursed-particle:nth-child(10) { left: 53%; animation-delay: 0.3s; animation-duration: 8.5s; }
.cursed-particle:nth-child(11) { left: 58%; animation-delay: 3.5s; animation-duration: 7s; }
.cursed-particle:nth-child(12) { left: 64%; animation-delay: 1.0s; animation-duration: 11s; }
.cursed-particle:nth-child(13) { left: 69%; animation-delay: 2.5s; animation-duration: 6s; }
.cursed-particle:nth-child(14) { left: 74%; animation-delay: 4.0s; animation-duration: 9s; }
.cursed-particle:nth-child(15) { left: 80%; animation-delay: 0.7s; animation-duration: 8s; }
.cursed-particle:nth-child(16) { left: 85%; animation-delay: 3.3s; animation-duration: 10s; }
.cursed-particle:nth-child(17) { left: 90%; animation-delay: 1.5s; animation-duration: 7.5s; }
.cursed-particle:nth-child(18) { left: 95%; animation-delay: 2.2s; animation-duration: 6.5s; }
.cursed-particle:nth-child(19) { left: 6%; animation-delay: 5.0s; animation-duration: 9s; }
.cursed-particle:nth-child(20) { left: 22%; animation-delay: 3.8s; animation-duration: 8s; }
.cursed-particle:nth-child(21) { left: 35%; animation-delay: 6.0s; animation-duration: 10s; }
.cursed-particle:nth-child(22) { left: 45%; animation-delay: 4.5s; animation-duration: 7s; }
.cursed-particle:nth-child(23) { left: 55%; animation-delay: 5.5s; animation-duration: 9s; }
.cursed-particle:nth-child(24) { left: 67%; animation-delay: 6.5s; animation-duration: 8s; }
.cursed-particle:nth-child(25) { left: 78%; animation-delay: 7.0s; animation-duration: 11s; }

/* ═══════════════════════════════════════════════════════════
   SUMMONING PORTAL — The hero "gate" animation
   ═══════════════════════════════════════════════════════════ */
.hero {
  position: relative;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  z-index: 1;
  overflow: hidden;
}

.hero::before {
  content: '';
  position: absolute;
  top: 50%; left: 50%;
  width: 600px; height: 600px;
  transform: translate(-50%, -50%);
  background: radial-gradient(circle, rgba(107,33,168,0.15) 0%, rgba(107,33,168,0.05) 40%, transparent 70%);
  border-radius: 50%;
  animation: pulse-glow 4s ease-in-out infinite;
  pointer-events: none;
}

@keyframes pulse-glow {
  0%, 100% { transform: translate(-50%, -50%) scale(1); opacity: 0.5; }
  50% { transform: translate(-50%, -50%) scale(1.15); opacity: 1; }
}

.absorption-sphere {
  position: relative;
  width: 160px;
  height: 160px;
  margin-bottom: 48px;
}

.sphere-core {
  position: absolute;
  top: 50%; left: 50%;
  width: 80px; height: 80px;
  transform: translate(-50%, -50%);
  background: radial-gradient(circle at 35% 35%, #2a1a3e 0%, #0d0d15 40%, #000 70%);
  border-radius: 50%;
  box-shadow: 0 0 30px rgba(107,33,168,0.4), 0 0 60px rgba(107,33,168,0.2), 0 0 90px rgba(107,33,168,0.1), inset 0 0 20px rgba(0,0,0,0.8);
  animation: sphere-breathe 3s ease-in-out infinite;
}

@keyframes sphere-breathe {
  0%, 100% { transform: translate(-50%, -50%) scale(1); box-shadow: 0 0 30px rgba(107,33,168,0.4), 0 0 60px rgba(107,33,168,0.2), 0 0 90px rgba(107,33,168,0.1), inset 0 0 20px rgba(0,0,0,0.8); }
  50% { transform: translate(-50%, -50%) scale(1.08); box-shadow: 0 0 40px rgba(139,92,246,0.5), 0 0 80px rgba(107,33,168,0.3), 0 0 120px rgba(107,33,168,0.15), inset 0 0 25px rgba(0,0,0,0.9); }
}

.sphere-ring {
  position: absolute;
  top: 50%; left: 50%;
  border: 1px solid rgba(139,92,246,0.3);
  border-radius: 50%;
  transform: translate(-50%, -50%);
}

.sphere-ring:nth-child(2) {
  width: 110px; height: 110px;
  animation: orbit-ring 6s linear infinite;
  border-color: rgba(139,92,246,0.2);
  border-top-color: rgba(139,92,246,0.6);
}

.sphere-ring:nth-child(3) {
  width: 140px; height: 140px;
  animation: orbit-ring 8s linear infinite reverse;
  border-color: rgba(107,33,168,0.15);
  border-bottom-color: rgba(167,139,250,0.5);
}

.sphere-ring:nth-child(4) {
  width: 160px; height: 160px;
  animation: orbit-ring 10s linear infinite;
  border-color: rgba(107,33,168,0.1);
  border-left-color: rgba(139,92,246,0.4);
}

@keyframes orbit-ring {
  from { transform: translate(-50%, -50%) rotate(0deg); }
  to { transform: translate(-50%, -50%) rotate(360deg); }
}

.tendril {
  position: absolute;
  top: 50%; left: 50%;
  width: 2px;
  height: 40px;
  background: linear-gradient(to bottom, transparent, var(--cursed-violet), transparent);
  transform-origin: bottom center;
  animation: tendril-pull 3s ease-in infinite;
  opacity: 0.5;
}

.tendril:nth-child(5) { animation-delay: 0s; transform: translate(-50%, -100%) rotate(0deg); }
.tendril:nth-child(6) { animation-delay: 0.4s; transform: translate(-50%, -100%) rotate(45deg); }
.tendril:nth-child(7) { animation-delay: 0.8s; transform: translate(-50%, -100%) rotate(90deg); }
.tendril:nth-child(8) { animation-delay: 1.2s; transform: translate(-50%, -100%) rotate(135deg); }
.tendril:nth-child(9) { animation-delay: 1.6s; transform: translate(-50%, -100%) rotate(180deg); }
.tendril:nth-child(10) { animation-delay: 2.0s; transform: translate(-50%, -100%) rotate(225deg); }
.tendril:nth-child(11) { animation-delay: 2.4s; transform: translate(-50%, -100%) rotate(270deg); }
.tendril:nth-child(12) { animation-delay: 2.8s; transform: translate(-50%, -100%) rotate(315deg); }

@keyframes tendril-pull {
  0% { height: 80px; opacity: 0; }
  30% { opacity: 0.6; }
  100% { height: 0px; opacity: 0; }
}

.hero-title {
  font-family: 'Noto Serif JP', serif;
  font-size: clamp(2.5rem, 6vw, 5rem);
  font-weight: 900;
  letter-spacing: 0.08em;
  text-align: center;
  color: var(--bone);
  text-shadow: 0 0 40px rgba(107,33,168,0.4);
  animation: title-reveal 2s ease-out forwards;
  opacity: 0;
  transform: translateY(20px);
}

@keyframes title-reveal {
  to { opacity: 1; transform: translateY(0); }
}

.hero-sub {
  font-family: 'Space Mono', monospace;
  font-size: clamp(0.7rem, 1.5vw, 0.9rem);
  letter-spacing: 0.35em;
  text-transform: uppercase;
  color: var(--cursed-glow);
  margin-top: 12px;
  opacity: 0;
  animation: title-reveal 2s ease-out 0.5s forwards;
}

.hero-desc {
  max-width: 600px;
  text-align: center;
  color: var(--ash);
  margin-top: 32px;
  font-size: 1.05rem;
  line-height: 1.8;
  opacity: 0;
  animation: title-reveal 2s ease-out 0.8s forwards;
}

.hero-desc em {
  color: var(--cursed-faint);
  font-style: italic;
}

/* Stats bar */
.curse-stats {
  display: flex;
  gap: 40px;
  margin-top: 48px;
  opacity: 0;
  animation: title-reveal 2s ease-out 1.1s forwards;
}

.stat {
  text-align: center;
}

.stat-num {
  font-family: 'Space Mono', monospace;
  font-size: 2rem;
  font-weight: 700;
  color: var(--cursed-violet);
  display: block;
}

.stat-label {
  font-family: 'Space Mono', monospace;
  font-size: 0.65rem;
  letter-spacing: 0.2em;
  text-transform: uppercase;
  color: var(--smoke);
}

/* ═══════════════════════════════════════════════════════════
   CURSED ENERGY RESERVE — The CE bar below hero stats
   ═══════════════════════════════════════════════════════════ */
.ce-reserve {
  width: 100%;
  max-width: 480px;
  margin-top: 36px;
  opacity: 0;
  animation: title-reveal 2s ease-out 1.3s forwards;
}

.ce-header {
  display: flex;
  justify-content: space-between;
  align-items: baseline;
  margin-bottom: 8px;
}

.ce-label {
  font-family: 'Space Mono', monospace;
  font-size: 0.6rem;
  letter-spacing: 0.2em;
  text-transform: uppercase;
  color: var(--smoke);
}

.ce-rank-badge {
  font-family: 'Noto Serif JP', serif;
  font-size: 0.75rem;
  font-weight: 700;
  letter-spacing: 0.05em;
  padding: 2px 12px;
  border: 1px solid;
  transition: all 0.5s;
}

.ce-bar-outer {
  width: 100%;
  height: 6px;
  background: rgba(139,92,246,0.08);
  border: 1px solid rgba(139,92,246,0.1);
  position: relative;
  overflow: hidden;
}

.ce-bar-fill {
  height: 100%;
  width: 0%;
  background: linear-gradient(90deg, var(--cursed-purple), var(--cursed-violet), var(--cursed-glow));
  transition: width 2s cubic-bezier(0.16, 1, 0.3, 1);
  position: relative;
  box-shadow: 0 0 12px rgba(139,92,246,0.4);
}

.ce-bar-fill::after {
  content: '';
  position: absolute;
  top: 0; right: 0;
  width: 20px; height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3));
  animation: ce-shimmer 2s ease-in-out infinite;
}

@keyframes ce-shimmer {
  0%, 100% { opacity: 0.3; }
  50% { opacity: 0.8; }
}

.ce-footer {
  display: flex;
  justify-content: space-between;
  align-items: baseline;
  margin-top: 6px;
}

.ce-points {
  font-family: 'Space Mono', monospace;
  font-size: 0.6rem;
  color: var(--cursed-glow);
  letter-spacing: 0.05em;
}

.ce-next {
  font-family: 'Space Mono', monospace;
  font-size: 0.55rem;
  color: var(--smoke);
  letter-spacing: 0.05em;
}

/* Scroll indicator */
.scroll-hint {
  position: absolute;
  bottom: 40px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  opacity: 0;
  animation: title-reveal 2s ease-out 1.5s forwards;
}

.scroll-hint span {
  font-family: 'Space Mono', monospace;
  font-size: 0.6rem;
  letter-spacing: 0.3em;
  text-transform: uppercase;
  color: var(--smoke);
}

.scroll-line {
  width: 1px;
  height: 40px;
  background: linear-gradient(to bottom, var(--cursed-purple), transparent);
  animation: scroll-pulse 2s ease-in-out infinite;
}

@keyframes scroll-pulse {
  0%, 100% { opacity: 0.3; transform: scaleY(1); }
  50% { opacity: 1; transform: scaleY(1.3); }
}

/* ═══════════════════════════════════════════════════════════
   NAVIGATION
   ═══════════════════════════════════════════════════════════ */
.nav {
  position: fixed;
  top: 0; left: 0; right: 0;
  z-index: 100;
  padding: 20px 40px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: linear-gradient(to bottom, rgba(5,5,8,0.95), transparent);
  backdrop-filter: blur(8px);
  transition: all 0.4s;
}

.nav.scrolled {
  background: rgba(5,5,8,0.95);
  padding: 14px 40px;
  border-bottom: 1px solid rgba(107,33,168,0.2);
}

.nav-brand {
  font-family: 'Noto Serif JP', serif;
  font-size: 1.1rem;
  font-weight: 700;
  color: var(--bone);
  text-decoration: none;
  letter-spacing: 0.05em;
}

.nav-brand .jp { color: var(--cursed-violet); margin-right: 8px; }

.nav-links {
  display: flex;
  gap: 32px;
  list-style: none;
}

.nav-links a {
  font-family: 'Space Mono', monospace;
  font-size: 0.7rem;
  letter-spacing: 0.15em;
  text-transform: uppercase;
  color: var(--ash);
  text-decoration: none;
  transition: color 0.3s;
  position: relative;
}

.nav-links a::after {
  content: '';
  position: absolute;
  bottom: -4px; left: 0;
  width: 0; height: 1px;
  background: var(--cursed-violet);
  transition: width 0.3s;
}

.nav-links a:hover { color: var(--cursed-glow); }
.nav-links a:hover::after { width: 100%; }

/* ═══════════════════════════════════════════════════════════
   GRADE FILTER BAR
   ═══════════════════════════════════════════════════════════ */
.filter-section {
  position: relative;
  z-index: 1;
  padding: 0 40px;
  margin-bottom: 60px;
}

.section-header {
  text-align: center;
  margin-bottom: 48px;
  padding-top: 100px;
}

.section-header h2 {
  font-family: 'Noto Serif JP', serif;
  font-size: clamp(1.8rem, 4vw, 3rem);
  font-weight: 900;
  color: var(--bone);
  letter-spacing: 0.05em;
}

.section-header .jp-sub {
  font-family: 'Noto Serif JP', serif;
  font-size: 0.9rem;
  color: var(--cursed-violet);
  margin-top: 4px;
  letter-spacing: 0.15em;
}

.section-header .divider {
  width: 60px; height: 1px;
  background: linear-gradient(to right, transparent, var(--cursed-purple), transparent);
  margin: 20px auto 0;
}

.filter-bar {
  display: flex;
  justify-content: center;
  gap: 12px;
  flex-wrap: wrap;
  margin-bottom: 48px;
}

.filter-btn {
  font-family: 'Space Mono', monospace;
  font-size: 0.7rem;
  letter-spacing: 0.1em;
  text-transform: uppercase;
  padding: 10px 24px;
  border: 1px solid rgba(139,92,246,0.2);
  background: transparent;
  color: var(--ash);
  cursor: pointer;
  transition: all 0.3s;
  position: relative;
  overflow: hidden;
}

.filter-btn::before {
  content: '';
  position: absolute;
  top: 0; left: -100%;
  width: 100%; height: 100%;
  background: linear-gradient(90deg, transparent, rgba(139,92,246,0.1), transparent);
  transition: left 0.5s;
}

.filter-btn:hover::before { left: 100%; }

.filter-btn:hover, .filter-btn.active {
  border-color: var(--cursed-violet);
  color: var(--cursed-glow);
  box-shadow: 0 0 20px rgba(107,33,168,0.2);
}

.filter-btn.active { background: rgba(107,33,168,0.15); }

.filter-btn .grade-dot {
  display: inline-block;
  width: 6px; height: 6px;
  border-radius: 50%;
  margin-right: 8px;
  vertical-align: middle;
}

/* ═══════════════════════════════════════════════════════════
   CURSE GRID
   ═══════════════════════════════════════════════════════════ */
.curse-grid {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 40px;
  position: relative;
  z-index: 1;
}

.grade-section { margin-bottom: 80px; }

.grade-title {
  display: flex;
  align-items: center;
  gap: 16px;
  margin-bottom: 32px;
  padding-bottom: 16px;
  border-bottom: 1px solid rgba(139,92,246,0.1);
}

.grade-title .grade-icon {
  width: 32px; height: 32px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: 'Space Mono', monospace;
  font-size: 0.7rem;
  font-weight: 700;
  color: white;
  flex-shrink: 0;
}

.grade-title h3 {
  font-family: 'Noto Serif JP', serif;
  font-size: 1.4rem;
  font-weight: 700;
  color: var(--bone);
  letter-spacing: 0.03em;
}

.grade-title .count {
  font-family: 'Space Mono', monospace;
  font-size: 0.65rem;
  color: var(--smoke);
  letter-spacing: 0.1em;
  margin-left: auto;
}

.curse-card {
  position: relative;
  display: grid;
  grid-template-columns: 8px 1fr auto;
  gap: 0;
  background: linear-gradient(135deg, rgba(18,18,30,0.8), rgba(10,10,18,0.9));
  border: 1px solid rgba(139,92,246,0.08);
  margin-bottom: 4px;
  transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
  overflow: hidden;
  text-decoration: none;
  color: inherit;
  cursor: pointer;
}

.curse-card::before {
  content: '';
  position: absolute;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: linear-gradient(90deg, transparent, rgba(139,92,246,0.03), transparent);
  opacity: 0;
  transition: opacity 0.4s;
}

.curse-card:hover {
  border-color: rgba(139,92,246,0.25);
  transform: translateX(4px);
  box-shadow: -4px 0 30px rgba(107,33,168,0.15);
}

.curse-card:hover::before { opacity: 1; }

.curse-card .grade-bar {
  width: 8px;
  min-height: 100%;
  opacity: 0.7;
  transition: opacity 0.3s;
}

.curse-card:hover .grade-bar { opacity: 1; }

.curse-card .card-body {
  padding: 20px 24px;
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.curse-card .curse-name {
  font-family: 'Noto Serif JP', serif;
  font-size: 1.15rem;
  font-weight: 700;
  color: var(--bone);
  transition: color 0.3s;
}

.curse-card:hover .curse-name { color: var(--cursed-glow); }

.curse-card .curse-meta {
  display: flex;
  gap: 20px;
  align-items: center;
  flex-wrap: wrap;
}

.curse-card .meta-item {
  font-family: 'Space Mono', monospace;
  font-size: 0.65rem;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  color: var(--smoke);
  display: flex;
  align-items: center;
  gap: 6px;
}

.curse-card .meta-item .dot {
  width: 4px; height: 4px;
  border-radius: 50%;
  opacity: 0.6;
}

/* CE badge on each card */
.curse-card .ce-value {
  font-family: 'Space Mono', monospace;
  font-size: 0.6rem;
  letter-spacing: 0.05em;
  color: var(--cursed-glow);
  opacity: 0.6;
}

.curse-card .card-arrow {
  display: flex;
  align-items: center;
  padding: 0 24px;
  color: var(--smoke);
  font-size: 1.2rem;
  transition: all 0.3s;
}

.curse-card:hover .card-arrow {
  color: var(--cursed-violet);
  transform: translateX(4px);
}

/* Grade-specific colors */
.grade-special .grade-bar, .grade-special .grade-icon { background: var(--grade-special); }
.grade-1 .grade-bar, .grade-1 .grade-icon { background: var(--grade-1); }
.grade-2 .grade-bar, .grade-2 .grade-icon { background: var(--grade-2); }
.grade-3 .grade-bar, .grade-3 .grade-icon { background: var(--grade-3); }
.grade-4 .grade-bar, .grade-4 .grade-icon { background: var(--grade-4); }

.grade-special .dot { background: var(--grade-special); }
.grade-1 .dot { background: var(--grade-1); }
.grade-2 .dot { background: var(--grade-2); }
.grade-3 .dot { background: var(--grade-3); }
.grade-4 .dot { background: var(--grade-4); }

.curse-card .grade-badge {
  font-family: 'Space Mono', monospace;
  font-size: 0.6rem;
  letter-spacing: 0.15em;
  text-transform: uppercase;
  padding: 3px 10px;
  border: 1px solid;
  display: inline-block;
  width: fit-content;
  opacity: 0.8;
}

.grade-special .grade-badge { color: var(--grade-special); border-color: rgba(220,38,38,0.3); }
.grade-1 .grade-badge { color: var(--grade-1); border-color: rgba(245,158,11,0.3); }
.grade-2 .grade-badge { color: var(--grade-2); border-color: rgba(59,130,246,0.3); }
.grade-3 .grade-badge { color: var(--grade-3); border-color: rgba(34,197,94,0.3); }
.grade-4 .grade-badge { color: var(--grade-4); border-color: rgba(107,114,128,0.3); }

/* ═══════════════════════════════════════════════════════════
   RANKING EXPLAINER
   ═══════════════════════════════════════════════════════════ */
.ranking-explainer {
  max-width: 720px;
  margin: 8px auto 48px;
  position: relative;
  z-index: 1;
}

.ranking-toggle {
  width: 100%;
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 14px 20px;
  background: rgba(18,18,30,0.5);
  border: 1px solid rgba(139,92,246,0.12);
  color: var(--ash);
  cursor: pointer;
  font-family: 'Space Mono', monospace;
  font-size: 0.7rem;
  letter-spacing: 0.12em;
  text-transform: uppercase;
  transition: all 0.3s;
}

.ranking-toggle:hover {
  border-color: rgba(139,92,246,0.3);
  color: var(--cursed-glow);
}

.ranking-toggle-icon {
  font-family: 'Noto Serif JP', serif;
  font-size: 1rem;
  color: var(--cursed-violet);
}

.ranking-chevron {
  margin-left: auto;
  transition: transform 0.3s;
  font-size: 0.8rem;
}

.ranking-toggle[aria-expanded="true"] .ranking-chevron {
  transform: rotate(180deg);
}

.ranking-body {
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.5s cubic-bezier(0.16, 1, 0.3, 1), padding 0.4s;
  background: rgba(10,10,18,0.7);
  border: 1px solid rgba(139,92,246,0.08);
  border-top: none;
}

.ranking-body.open {
  max-height: 900px;
  padding: 24px 20px;
}

.ranking-intro {
  font-family: 'Crimson Pro', serif;
  font-size: 0.95rem;
  color: var(--ash);
  line-height: 1.75;
  margin-bottom: 28px;
  max-width: 600px;
}

.ranking-grid {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.ranking-item {
  display: flex;
  gap: 16px;
  align-items: flex-start;
}

.ranking-color {
  width: 4px;
  min-height: 100%;
  border-radius: 2px;
  flex-shrink: 0;
  opacity: 0.8;
}

.ranking-details {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.ranking-name {
  font-family: 'Noto Serif JP', serif;
  font-size: 1rem;
  font-weight: 700;
  color: var(--bone);
  display: flex;
  align-items: baseline;
  gap: 10px;
}

.ranking-jp {
  font-size: 0.75rem;
  color: var(--cursed-violet);
  opacity: 0.6;
}

.ranking-ce {
  font-family: 'Space Mono', monospace;
  font-size: 0.6rem;
  color: var(--cursed-glow);
  opacity: 0.7;
  margin-left: auto;
}

.ranking-diff {
  font-family: 'Space Mono', monospace;
  font-size: 0.6rem;
  letter-spacing: 0.15em;
  text-transform: uppercase;
  color: var(--cursed-glow);
  opacity: 0.7;
}

.ranking-lore {
  font-family: 'Crimson Pro', serif;
  font-size: 0.88rem;
  color: var(--smoke);
  line-height: 1.6;
  margin-top: 2px;
}

/* ═══════════════════════════════════════════════════════════
   SUMMONING PORTAL ANIMATION
   ═══════════════════════════════════════════════════════════ */
.portal-divider {
  position: relative;
  height: 200px;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 40px 0;
  z-index: 1;
}

.portal {
  position: relative;
  width: 120px;
  height: 120px;
}

.portal-ring {
  position: absolute;
  top: 50%; left: 50%;
  transform: translate(-50%, -50%);
  border-radius: 50%;
  border: 1px solid;
  animation: portal-spin 4s linear infinite;
}

.portal-ring:nth-child(1) { width: 40px; height: 40px; border-color: rgba(139,92,246,0.5); animation-duration: 3s; }
.portal-ring:nth-child(2) { width: 70px; height: 70px; border-color: rgba(107,33,168,0.3); animation-duration: 5s; animation-direction: reverse; }
.portal-ring:nth-child(3) { width: 100px; height: 100px; border-color: rgba(107,33,168,0.15); animation-duration: 7s; }

.portal-center {
  position: absolute;
  top: 50%; left: 50%;
  width: 12px; height: 12px;
  transform: translate(-50%, -50%);
  background: var(--cursed-purple);
  border-radius: 50%;
  box-shadow: 0 0 20px var(--cursed-purple), 0 0 40px rgba(107,33,168,0.3);
  animation: portal-pulse 2s ease-in-out infinite;
}

@keyframes portal-spin {
  from { transform: translate(-50%, -50%) rotate(0deg); }
  to { transform: translate(-50%, -50%) rotate(360deg); }
}

@keyframes portal-pulse {
  0%, 100% { transform: translate(-50%, -50%) scale(1); opacity: 0.8; }
  50% { transform: translate(-50%, -50%) scale(1.5); opacity: 1; }
}

/* ═══════════════════════════════════════════════════════════
   UZUMAKI SECTION
   ═══════════════════════════════════════════════════════════ */
.uzumaki-section {
  position: relative;
  z-index: 1;
  padding: 100px 40px;
  text-align: center;
  overflow: hidden;
}

.uzumaki-bg {
  position: absolute;
  top: 50%; left: 50%;
  transform: translate(-50%, -50%);
  width: 500px; height: 500px;
  pointer-events: none;
}

.uzumaki-spiral {
  position: absolute;
  top: 50%; left: 50%;
  transform: translate(-50%, -50%);
  width: 300px; height: 300px;
  border: 1px solid rgba(107,33,168,0.1);
  border-top-color: rgba(139,92,246,0.3);
  border-radius: 50%;
  animation: uzumaki-rotate 20s linear infinite;
}

.uzumaki-spiral:nth-child(2) { width: 400px; height: 400px; animation-duration: 30s; animation-direction: reverse; border-color: rgba(107,33,168,0.05); border-right-color: rgba(139,92,246,0.2); }
.uzumaki-spiral:nth-child(3) { width: 500px; height: 500px; animation-duration: 40s; border-color: rgba(107,33,168,0.03); border-bottom-color: rgba(139,92,246,0.15); }

@keyframes uzumaki-rotate {
  from { transform: translate(-50%, -50%) rotate(0deg); }
  to { transform: translate(-50%, -50%) rotate(360deg); }
}

.uzumaki-content { position: relative; }

.uzumaki-content h2 {
  font-family: 'Noto Serif JP', serif;
  font-size: clamp(1.5rem, 3vw, 2.5rem);
  font-weight: 900;
  color: var(--bone);
  margin-bottom: 16px;
}

.uzumaki-content .technique-name {
  font-family: 'Space Mono', monospace;
  font-size: 0.75rem;
  letter-spacing: 0.3em;
  text-transform: uppercase;
  color: var(--cursed-violet);
  margin-bottom: 32px;
}

.grade-summary {
  display: flex;
  justify-content: center;
  gap: 40px;
  flex-wrap: wrap;
  margin-top: 40px;
}

.grade-summary-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
}

.grade-summary-item .gs-count {
  font-family: 'Space Mono', monospace;
  font-size: 1.8rem;
  font-weight: 700;
}

.grade-summary-item .gs-label {
  font-family: 'Space Mono', monospace;
  font-size: 0.6rem;
  letter-spacing: 0.15em;
  text-transform: uppercase;
  color: var(--smoke);
}

.gs-special .gs-count { color: var(--grade-special); }
.gs-1 .gs-count { color: var(--grade-1); }
.gs-2 .gs-count { color: var(--grade-2); }
.gs-3 .gs-count { color: var(--grade-3); }
.gs-4 .gs-count { color: var(--grade-4); }

/* ═══════════════════════════════════════════════════════════
   EXTRACTED TECHNIQUES
   ═══════════════════════════════════════════════════════════ */
.techniques-header { margin-top: 60px; margin-bottom: 32px; }

.technique-sub-label {
  font-family: 'Space Mono', monospace;
  font-size: 0.7rem;
  letter-spacing: 0.25em;
  text-transform: uppercase;
  color: var(--cursed-violet);
}

.technique-sub-desc {
  font-family: 'Noto Serif JP', serif;
  font-size: 0.85rem;
  color: var(--smoke);
  margin-top: 4px;
}

.techniques-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
  gap: 8px;
  max-width: 800px;
  margin: 0 auto;
}

.technique-card {
  position: relative;
  padding: 16px 20px;
  background: rgba(18,18,30,0.6);
  border: 1px solid rgba(139,92,246,0.1);
  transition: all 0.3s;
  text-decoration: none;
  color: inherit;
  display: block;
  text-align: left;
}

.technique-card:hover {
  border-color: rgba(139,92,246,0.3);
  background: rgba(18,18,30,0.9);
  transform: translateY(-2px);
  box-shadow: 0 4px 20px rgba(107,33,168,0.15);
}

.technique-card .tech-name {
  font-family: 'Noto Serif JP', serif;
  font-size: 1rem;
  font-weight: 700;
  color: var(--bone);
  display: block;
  margin-bottom: 4px;
}

.technique-card:hover .tech-name { color: var(--cursed-glow); }

.technique-card .tech-type {
  font-family: 'Space Mono', monospace;
  font-size: 0.55rem;
  letter-spacing: 0.15em;
  text-transform: uppercase;
  color: var(--cursed-violet);
  opacity: 0.7;
}

.technique-card .tech-desc {
  font-family: 'Crimson Pro', serif;
  font-size: 0.85rem;
  color: var(--smoke);
  margin-top: 8px;
  line-height: 1.5;
}

/* ═══════════════════════════════════════════════════════════
   FOOTER
   ═══════════════════════════════════════════════════════════ */
footer {
  position: relative;
  z-index: 1;
  text-align: center;
  padding: 60px 40px;
  border-top: 1px solid rgba(107,33,168,0.1);
}

footer p {
  font-family: 'Space Mono', monospace;
  font-size: 0.65rem;
  letter-spacing: 0.15em;
  text-transform: uppercase;
  color: var(--smoke);
}

footer a {
  color: var(--cursed-violet);
  text-decoration: none;
  transition: color 0.3s;
}

footer a:hover { color: var(--cursed-glow); }

/* ═══════════════════════════════════════════════════════════
   EMPTY STATE
   ═══════════════════════════════════════════════════════════ */
.empty-state { text-align: center; padding: 80px 20px; display: none; }
.empty-state.visible { display: block; }
.empty-state p { font-family: 'Space Mono', monospace; font-size: 0.75rem; color: var(--smoke); letter-spacing: 0.1em; }

/* ═══════════════════════════════════════════════════════════
   RESPONSIVE
   ═══════════════════════════════════════════════════════════ */
@media (max-width: 768px) {
  .nav { padding: 16px 20px; }
  .nav-links { gap: 16px; }
  .nav-links a { font-size: 0.6rem; }
  .curse-stats { gap: 24px; }
  .ce-reserve { max-width: 320px; }
  .curse-card { grid-template-columns: 6px 1fr auto; }
  .curse-card .card-body { padding: 16px; }
  .curse-card .curse-meta { gap: 12px; }
  .filter-bar { gap: 8px; }
  .filter-btn { padding: 8px 16px; font-size: 0.6rem; }
  .curse-grid { padding: 0 20px; }
  .grade-summary { gap: 20px; }
  .section-header { padding-top: 80px; }
}

@media (max-width: 480px) {
  .nav-links { display: none; }
  .hero-desc { padding: 0 20px; }
  .curse-stats { flex-wrap: wrap; gap: 16px; }
  .ce-reserve { max-width: 280px; padding: 0 20px; }
  .grade-summary { gap: 16px; }
}

/* ═══════════════════════════════════════════════════════════
   UTILITY
   ═══════════════════════════════════════════════════════════ */
.hidden { display: none !important; }
.grade-section.filtered-out { display: none; }
.curse-card.filtered-out { display: none; }

.reveal {
  opacity: 0;
  transform: translateY(30px);
  transition: opacity 0.8s ease-out, transform 0.8s ease-out;
}

.reveal.visible {
  opacity: 1;
  transform: translateY(0);
}
</style>
</head>
<body>

<!-- Cursed Energy Background Particles -->
<div class="cursed-bg">
  <div class="cursed-particle"></div><div class="cursed-particle"></div>
  <div class="cursed-particle"></div><div class="cursed-particle"></div>
  <div class="cursed-particle"></div><div class="cursed-particle"></div>
  <div class="cursed-particle"></div><div class="cursed-particle"></div>
  <div class="cursed-particle"></div><div class="cursed-particle"></div>
  <div class="cursed-particle"></div><div class="cursed-particle"></div>
  <div class="cursed-particle"></div><div class="cursed-particle"></div>
  <div class="cursed-particle"></div><div class="cursed-particle"></div>
  <div class="cursed-particle"></div><div class="cursed-particle"></div>
  <div class="cursed-particle"></div><div class="cursed-particle"></div>
  <div class="cursed-particle"></div><div class="cursed-particle"></div>
  <div class="cursed-particle"></div><div class="cursed-particle"></div>
  <div class="cursed-particle"></div>
</div>

<!-- Navigation -->
<nav class="nav" id="nav">
  <a href="#" class="nav-brand"><span class="jp">呪</span> Curse Collection</a>
  <ul class="nav-links">
    <li><a href="#collection">Collection</a></li>
    <li><a href="#uzumaki">Uzumaki</a></li>
    <li><a href="https://github.com/Fonners" target="_blank">GitHub</a></li>
  </ul>
</nav>

<!-- Hero -->
<section class="hero">
  <div class="absorption-sphere">
    <div class="sphere-core"></div>
    <div class="sphere-ring"></div>
    <div class="sphere-ring"></div>
    <div class="sphere-ring"></div>
    <div class="tendril"></div><div class="tendril"></div>
    <div class="tendril"></div><div class="tendril"></div>
    <div class="tendril"></div><div class="tendril"></div>
    <div class="tendril"></div><div class="tendril"></div>
  </div>

  <h1 class="hero-title">呪霊操術</h1>
  <p class="hero-sub">Cursed Spirit Manipulation</p>
  <p class="hero-desc">
    Every curse exorcised is absorbed, catalogued, and stored.
    — <em> Each challenge conquered becomes part of the collection. </em>
  </p>

  <div class="curse-stats">
    <div class="stat">
      <span class="stat-num" id="total-count">0</span>
      <span class="stat-label">Curses Absorbed</span>
    </div>
    <div class="stat">
      <span class="stat-num" id="ce-count">0</span>
      <span class="stat-label">Cursed Energy</span>
    </div>
    <div class="stat">
      <span class="stat-num" id="techniques-count">0</span>
      <span class="stat-label">Techniques Extracted</span>
    </div>
  </div>

  <!-- Cursed Energy Reserve Bar -->
  <div class="ce-reserve">
    <div class="ce-header">
      <span class="ce-label">Cursed Energy Reserve</span>
      <span class="ce-rank-badge" id="ce-rank-badge">—</span>
    </div>
    <div class="ce-bar-outer">
      <div class="ce-bar-fill" id="ce-bar-fill"></div>
    </div>
    <div class="ce-footer">
      <span class="ce-points" id="ce-points-label">0 CE</span>
      <span class="ce-next" id="ce-next-label"></span>
    </div>
  </div>

  <div class="scroll-hint">
    <span>View Collection</span>
    <div class="scroll-line"></div>
  </div>
</section>

<!-- Collection Section -->
<section id="collection" class="filter-section">
  <div class="section-header reveal">
    <h2>Curse Collection</h2>
    <p class="jp-sub">呪霊蒐集</p>
    <div class="divider"></div>
  </div>

  <div class="filter-bar reveal">
    <button class="filter-btn active" data-grade="all">All Grades</button>
    <button class="filter-btn" data-grade="special"><span class="grade-dot" style="background:var(--grade-special)"></span>Special Grade</button>
    <button class="filter-btn" data-grade="1"><span class="grade-dot" style="background:var(--grade-1)"></span>Grade 1</button>
    <button class="filter-btn" data-grade="2"><span class="grade-dot" style="background:var(--grade-2)"></span>Grade 2</button>
    <button class="filter-btn" data-grade="3"><span class="grade-dot" style="background:var(--grade-3)"></span>Grade 3</button>
    <button class="filter-btn" data-grade="4"><span class="grade-dot" style="background:var(--grade-4)"></span>Grade 4</button>
  </div>

  <!-- Ranking Explanation -->
  <div class="ranking-explainer reveal" id="ranking-info">
    <button class="ranking-toggle" id="ranking-toggle" aria-expanded="false">
      <span class="ranking-toggle-icon">呪</span>
      <span>Curse Grading System</span>
      <span class="ranking-chevron">▾</span>
    </button>
    <div class="ranking-body" id="ranking-body">
      <p class="ranking-intro">
        Cursed spirits are graded by the threat they pose — the stronger the curse, the fewer sorcerers capable of exorcising it.
        Each absorbed curse is a conquered CTF challenge, graded by skill and effort required to capture the flag.
        The more powerful the curse absorbed, the more cursed energy added to your reserves.
      </p>
      <div class="ranking-grid">
        <div class="ranking-item">
          <div class="ranking-color" style="background:var(--grade-special)"></div>
          <div class="ranking-details">
            <span class="ranking-name">Special Grade<span class="ranking-jp">特級</span><span class="ranking-ce">+1000 CE</span></span>
            <span class="ranking-diff">Insane / Expert</span>
            <span class="ranking-lore">Multi-stage exploitation chains, custom kernel exploits, zero-day-level reversing. These challenges require chaining multiple vulns across hardened systems — RCE through blind deserialization into container escapes, full binary exploitation with all mitigations enabled. The kind that takes days, not hours.</span>
          </div>
        </div>
        <div class="ranking-item">
          <div class="ranking-color" style="background:var(--grade-1)"></div>
          <div class="ranking-details">
            <span class="ranking-name">Grade 1<span class="ranking-jp">１級</span><span class="ranking-ce">+500 CE</span></span>
            <span class="ranking-diff">Hard</span>
            <span class="ranking-lore">Heap exploitation, complex web chains, custom crypto attacks. You're writing your own shellcode, bypassing WAFs, or breaking flawed cryptographic implementations. Deep domain knowledge is non-negotiable — you need to know the internals to find the bug.</span>
          </div>
        </div>
        <div class="ranking-item">
          <div class="ranking-color" style="background:var(--grade-2)"></div>
          <div class="ranking-details">
            <span class="ranking-name">Grade 2<span class="ranking-jp">２級</span><span class="ranking-ce">+200 CE</span></span>
            <span class="ranking-diff">Medium</span>
            <span class="ranking-lore">SQL injection with filters, buffer overflows with partial protections, RSA with known weaknesses. The vuln class is identifiable but exploitation isn't straightforward — you need solid fundamentals in networking, binary analysis, or web security to land the hit.</span>
          </div>
        </div>
        <div class="ranking-item">
          <div class="ranking-color" style="background:var(--grade-3)"></div>
          <div class="ranking-details">
            <span class="ranking-name">Grade 3<span class="ranking-jp">３級</span><span class="ranking-ce">+100 CE</span></span>
            <span class="ranking-diff">Easy</span>
            <span class="ranking-lore">Classic XSS, basic directory traversal, simple forensics carving, known CVEs with public exploits. The attack surface is visible and the path is clear — good for practicing methodology, sharpening enumeration, and building muscle memory with your toolkit.</span>
          </div>
        </div>
        <div class="ranking-item">
          <div class="ranking-color" style="background:var(--grade-4)"></div>
          <div class="ranking-details">
            <span class="ranking-name">Grade 4<span class="ranking-jp">４級</span><span class="ranking-ce">+50 CE</span></span>
            <span class="ranking-diff">Trivial</span>
            <span class="ranking-lore">Base64 decoding, strings on a binary, robots.txt, inspecting page source. Absorbed with practically no conditions attached — the entry-level warm-ups where you run the tool, read the output, and submit the flag. Everyone starts here.</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<div class="curse-grid" id="curse-grid"></div>

<div class="empty-state" id="empty-state">
  <p>No curses absorbed at this grade... yet.</p>
</div>

<!-- Portal Divider -->
<div class="portal-divider">
  <div class="portal">
    <div class="portal-ring"></div>
    <div class="portal-ring"></div>
    <div class="portal-ring"></div>
    <div class="portal-center"></div>
  </div>
</div>

<!-- Uzumaki Section -->
<section id="uzumaki" class="uzumaki-section">
  <div class="uzumaki-bg">
    <div class="uzumaki-spiral"></div>
    <div class="uzumaki-spiral"></div>
    <div class="uzumaki-spiral"></div>
  </div>
  <div class="uzumaki-content reveal">
    <p class="technique-name">Maximum: Uzumaki</p>
    <h2>極ノ番「渦」</h2>
    <p style="color:var(--ash); max-width:500px; margin: 16px auto 0; font-size:0.95rem;">
      The culmination of all absorbed curses — condensed, refined, and unleashed.
      A complete overview of every spirit in the collection.
    </p>
    <div class="grade-summary" id="grade-summary"></div>

    <div class="techniques-header">
      <p class="technique-sub-label">Extracted Cursed Techniques</p>
      <p class="technique-sub-desc">抽出術式 — Tools absorbed from conquered curses</p>
    </div>
    <div class="techniques-grid" id="techniques-grid"></div>
  </div>
</section>

<!-- Footer -->
<footer>
  <p>Cursed spirits absorbed and catalogued &middot; <a href="https://github.com/Fonners" target="_blank">GitHub</a></p>
  <p style="margin-top:8px; font-size:0.55rem; color: rgba(107,114,128,0.5);">Inspired by Suguru Geto's 呪霊操術 — Jujutsu Kaisen</p>
</footer>

<script>
/* ═══════════════════════════════════════════════════════════
   CURSE DATA
   ═══════════════════════════════════════════════════════════ */
const CURSES = [
  {
    name: "Intigriti-0226",
    grade: "2",
    type: "web",
    date: "2026-02-23",
    ctf: "Intigriti",
    url: "https://github.com/Fonners/CTF-Walkthroughs/tree/main/CTF-Fonners-2026/Intigriti-0226"
  },
  {
    name: "FunWithFlags",
    grade: "3",
    type: "misc",
    date: "2025-10-03",
    ctf: "VulnHub",
    url: "https://github.com/Fonners/CTF-Walkthroughs/tree/main/CTF-Fonners-2025/FunWithFlags"
  },
  {
    name: "Dragon Ball",
    grade: "3",
    type: "misc",
    date: "2025-10-07",
    ctf: "VulnHub",
    url: "https://github.com/Fonners/CTF-Walkthroughs/tree/main/CTF-Fonners-2025/Dragon%20Ball"
  },
  {
    name: "Tomato",
    grade: "3",
    type: "pwn",
    date: "2025-10-09",
    ctf: "VulnHub",
    url: "https://github.com/Fonners/CTF-Walkthroughs/tree/main/CTF-Fonners-2025/Tomato"
  },
  {
    name: "DerpNStink",
    grade: "2",
    type: "misc",
    date: "2025-10-20",
    ctf: "VulnHub",
    url: "https://github.com/Fonners/CTF-Walkthroughs/tree/main/CTF-Fonners-2025/DerpNStink"
  },
  {
    name: "Nemesis",
    grade: "2",
    type: "misc",
    date: "2025-10-24",
    ctf: "VulnHub",
    url: "https://github.com/Fonners/CTF-Walkthroughs/tree/main/CTF-Fonners-2025/Nemesis"
  },
  {
    name: "Darkhole - 1",
    grade: "2",
    type: "misc",
    date: "2025-10-27",
    ctf: "VulnHub",
    url: "https://github.com/Fonners/CTF-Walkthroughs/tree/main/CTF-Fonners-2025/Darkhole1"
  },
  {
    name: "Healthcare",
    grade: "2",
    type: "misc",
    date: "2025-11-10",
    ctf: "VulnHub",
    url: "https://github.com/Fonners/CTF-Walkthroughs/tree/main/CTF-Fonners-2025/Healthcare"
  },
  {
    name: "FunBox11",
    grade: "4",
    type: "pwn",
    date: "2025-11-12",
    ctf: "VulnHub",
    url: "https://github.com/Fonners/CTF-Walkthroughs/tree/main/CTF-Fonners-2025/FunBox11"
  },
  {
    name: "HF2019",
    grade: "4",
    type: "misc",
    date: "2025-11-14",
    ctf: "VulnHub",
    url: "https://github.com/Fonners/CTF-Walkthroughs/tree/main/CTF-Fonners-2025/HF2019"
  },
  {
    name: "Darkhole - 2",
    grade: "1",
    type: "misc",
    date: "2025-11-15",
    ctf: "VulnHub",
    url: "https://github.com/Fonners/CTF-Walkthroughs/tree/main/CTF-Fonners-2025/Darkhole2"
  },
  {
    name: "Game Of Thrones - 7 Kingdoms",
    grade: "1",
    type: "misc",
    date: "2025-12-10",
    ctf: "VulnHub",
    url: "https://github.com/Fonners/CTF-Walkthroughs/tree/main/CTF-Fonners-2025/GOT7K"
  },
  {
    name: "Certified Web Exploitation Specialist - HTB",
    grade: "special",
    type: "web",
    date: "2025-12-29",
    ctf: "Hack The Box",
    url: "https://academy.hackthebox.com/exams/2/"
  },
  {
    name: "School 1",
    grade: "3",
    type: "pwn",
    date: "2025-10-11",
    ctf: "VulnHub",
    url: "https://github.com/Fonners/CTF-Walkthroughs/tree/main/CTF-Fonners-2025/School%201"
  },
];

/* ═══════════════════════════════════════════════════════════
   TECHNIQUES
   ═══════════════════════════════════════════════════════════ */
const TECHNIQUES = [
  { name: "Nmap", type: "recon", desc: "Network scanner & service enumeration", url: "" },
  { name: "sqlmap", type: "exploit", desc: "SQLI exploit", url: "" },
  { name: "Burp Suite", type: "web", desc: "Web proxy & vulnerability scanner", url: "" },
  { name: "Caido", type: "web", desc: "Web proxy & vulnerability scanner", url: "" },
  { name: "pwntools", type: "exploit", desc: "Python CTF framework for binary exploitation", url: "" },
  { name: "Custom SQLi Script", type: "script", desc: "Personal blind SQL injection automation", url: "https://github.com/Fonners/tools/sqli-auto" },
  { name: "Ghidra", type: "rev", desc: "NSA reverse engineering suite", url: "" },
  { name: "netdiscover", type: "recon", desc: "Network scanner", url: "" },
];

/* ═══════════════════════════════════════════════════════════
   CURSED ENERGY CONFIG
   
   CE points per grade — the stronger the curse absorbed,
   the more cursed energy added to your reserves.
   
   Sorcerer ranks are earned as total CE grows:
   ═══════════════════════════════════════════════════════════ */
const CE_POINTS = {
  special: 5000,
  "1": 2000,
  "2": 1000,
  "3": 500,
  "4": 100,
};

const SORCERER_RANKS = [
  { threshold: 0,     label: "Grade 4 Sorcerer",       jp: "四級術師", color: "var(--grade-4)" },
  { threshold: 1500,   label: "Grade 3 Sorcerer",       jp: "三級術師", color: "var(--grade-3)" },
  { threshold: 5000,  label: "Grade 2 Sorcerer",       jp: "二級術師", color: "var(--grade-2)" },
  { threshold: 10000,  label: "Semi-Grade 1 Sorcerer",  jp: "準一級術師", color: "var(--grade-1)" },
  { threshold: 20000,  label: "Grade 1 Sorcerer",       jp: "一級術師", color: "var(--grade-1)" },
  { threshold: 50000,  label: "Special Grade Sorcerer",  jp: "特級術師", color: "var(--grade-special)" },
  { threshold: 100000, label: "The Strongest",           jp: "最強", color: "var(--cursed-glow)" },
];

/* ═══════════════════════════════════════════════════════════
   GRADE CONFIG
   ═══════════════════════════════════════════════════════════ */
const GRADE_CONFIG = {
  special: { label: "Special Grade", shortLabel: "特", order: 0 },
  "1":     { label: "Grade 1",       shortLabel: "壱", order: 1 },
  "2":     { label: "Grade 2",       shortLabel: "弐", order: 2 },
  "3":     { label: "Grade 3",       shortLabel: "参", order: 3 },
  "4":     { label: "Grade 4",       shortLabel: "肆", order: 4 },
};

/* ═══════════════════════════════════════════════════════════
   CE CALCULATION
   ═══════════════════════════════════════════════════════════ */
function getTotalCE() {
  return CURSES.reduce((sum, c) => sum + (CE_POINTS[c.grade] || 0), 0);
}

function getSorcererRank(ce) {
  let rank = SORCERER_RANKS[0];
  for (const r of SORCERER_RANKS) {
    if (ce >= r.threshold) rank = r;
  }
  return rank;
}

function getNextRank(ce) {
  for (const r of SORCERER_RANKS) {
    if (ce < r.threshold) return r;
  }
  return null;
}

/* ═══════════════════════════════════════════════════════════
   RENDER FUNCTIONS
   ═══════════════════════════════════════════════════════════ */
function formatDate(dateStr) {
  const d = new Date(dateStr + 'T00:00:00');
  return d.toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' });
}

function renderCurses(filter = 'all') {
  const grid = document.getElementById('curse-grid');
  const emptyState = document.getElementById('empty-state');
  grid.innerHTML = '';

  const grouped = {};
  const gradeOrder = ['special', '1', '2', '3', '4'];
  gradeOrder.forEach(g => { grouped[g] = []; });
  CURSES.forEach(c => {
    if (!grouped[c.grade]) grouped[c.grade] = [];
    grouped[c.grade].push(c);
  });

  Object.keys(grouped).forEach(g => {
    grouped[g].sort((a, b) => new Date(b.date) - new Date(a.date));
  });

  let totalVisible = 0;

  gradeOrder.forEach(grade => {
    const curses = grouped[grade];
    if (!curses || curses.length === 0) return;
    if (filter !== 'all' && filter !== grade) return;

    totalVisible += curses.length;
    const section = document.createElement('div');
    section.className = `grade-section grade-${grade} reveal`;
    const config = GRADE_CONFIG[grade];
    const cePerCurse = CE_POINTS[grade];

    section.innerHTML = `
      <div class="grade-title">
        <div class="grade-icon">${config.shortLabel}</div>
        <h3>${config.label}</h3>
        <span class="count">${curses.length} curse${curses.length !== 1 ? 's' : ''} absorbed &middot; ${curses.length * cePerCurse} CE</span>
      </div>
    `;

    curses.forEach(curse => {
      const card = document.createElement('a');
      card.className = `curse-card grade-${grade}`;
      card.href = curse.url;
      card.target = '_blank';
      card.rel = 'noopener';
      card.innerHTML = `
        <div class="grade-bar"></div>
        <div class="card-body">
          <span class="curse-name">${curse.name}</span>
          <div class="curse-meta">
            <span class="meta-item"><span class="dot"></span>${curse.type.toUpperCase()}</span>
            <span class="meta-item">${formatDate(curse.date)}</span>
            <span class="meta-item">${curse.ctf}</span>
            <span class="ce-value">+${cePerCurse} CE</span>
          </div>
        </div>
        <div class="card-arrow">\u2192</div>
      `;
      section.appendChild(card);
    });

    grid.appendChild(section);
  });

  if (totalVisible === 0) {
    emptyState.classList.add('visible');
  } else {
    emptyState.classList.remove('visible');
  }

  requestAnimationFrame(() => {
    document.querySelectorAll('.grade-section.reveal').forEach((el, i) => {
      setTimeout(() => el.classList.add('visible'), i * 150);
    });
  });
}

function updateStats() {
  const total = CURSES.length;
  const techniques = TECHNIQUES.length;
  const totalCE = getTotalCE();

  animateCounter('total-count', total);
  animateCounter('ce-count', totalCE);
  animateCounter('techniques-count', techniques);

  // CE bar
  updateCEBar(totalCE);

  // Grade summary
  const summary = document.getElementById('grade-summary');
  const gradeOrder = ['special', '1', '2', '3', '4'];
  const classMap = { special: 'gs-special', '1': 'gs-1', '2': 'gs-2', '3': 'gs-3', '4': 'gs-4' };

  summary.innerHTML = gradeOrder.map(g => {
    const count = CURSES.filter(c => c.grade === g).length;
    const config = GRADE_CONFIG[g];
    return `
      <div class="grade-summary-item ${classMap[g]}">
        <span class="gs-count">${count}</span>
        <span class="gs-label">${config.label}</span>
      </div>
    `;
  }).join('');

  renderTechniques();
}

function updateCEBar(totalCE) {
  const rank = getSorcererRank(totalCE);
  const next = getNextRank(totalCE);

  // Rank badge
  const badge = document.getElementById('ce-rank-badge');
  badge.textContent = rank.jp + ' — ' + rank.label;
  badge.style.color = rank.color;
  badge.style.borderColor = rank.color;

  // Progress bar
  const fill = document.getElementById('ce-bar-fill');
  const pointsLabel = document.getElementById('ce-points-label');
  const nextLabel = document.getElementById('ce-next-label');

  pointsLabel.textContent = totalCE.toLocaleString() + ' CE';

  if (next) {
    const prevThreshold = rank.threshold;
    const progress = ((totalCE - prevThreshold) / (next.threshold - prevThreshold)) * 100;
    setTimeout(() => { fill.style.width = Math.min(progress, 100) + '%'; }, 300);
    nextLabel.textContent = (next.threshold - totalCE) + ' CE to ' + next.jp;
  } else {
    setTimeout(() => { fill.style.width = '100%'; }, 300);
    nextLabel.textContent = 'Max rank achieved';
  }
}

function renderTechniques() {
  const grid = document.getElementById('techniques-grid');
  grid.innerHTML = TECHNIQUES.map(t => {
    const tag = t.url ? 'a' : 'div';
    const href = t.url ? ` href="${t.url}" target="_blank" rel="noopener"` : '';
    return `
      <${tag} class="technique-card"${href}>
        <span class="tech-name">${t.name}</span>
        <span class="tech-type">${t.type}</span>
        ${t.desc ? `<span class="tech-desc">${t.desc}</span>` : ''}
      </${tag}>
    `;
  }).join('');
}

function animateCounter(id, target) {
  const el = document.getElementById(id);
  let current = 0;
  const duration = 1500;
  const steps = 40;
  const increment = target / steps;
  let step = 0;
  const interval = setInterval(() => {
    step++;
    current = Math.round(Math.min(increment * step, target));
    el.textContent = current.toLocaleString();
    if (step >= steps) {
      el.textContent = target.toLocaleString();
      clearInterval(interval);
    }
  }, duration / steps);
}

/* ═══════════════════════════════════════════════════════════
   RANKING EXPLAINER TOGGLE
   ═══════════════════════════════════════════════════════════ */
document.getElementById('ranking-toggle').addEventListener('click', () => {
  const toggle = document.getElementById('ranking-toggle');
  const body = document.getElementById('ranking-body');
  const expanded = toggle.getAttribute('aria-expanded') === 'true';
  toggle.setAttribute('aria-expanded', !expanded);
  body.classList.toggle('open');
});

/* ═══════════════════════════════════════════════════════════
   FILTER LOGIC
   ═══════════════════════════════════════════════════════════ */
document.querySelectorAll('.filter-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    renderCurses(btn.dataset.grade);
  });
});

/* ═══════════════════════════════════════════════════════════
   NAV SCROLL EFFECT
   ═══════════════════════════════════════════════════════════ */
window.addEventListener('scroll', () => {
  const nav = document.getElementById('nav');
  if (window.scrollY > 80) { nav.classList.add('scrolled'); }
  else { nav.classList.remove('scrolled'); }
});

/* ═══════════════════════════════════════════════════════════
   SCROLL REVEAL
   ═══════════════════════════════════════════════════════════ */
const observer = new IntersectionObserver((entries) => {
  entries.forEach(entry => {
    if (entry.isIntersecting) entry.target.classList.add('visible');
  });
}, { threshold: 0.1 });

document.querySelectorAll('.reveal').forEach(el => observer.observe(el));

/* ═══════════════════════════════════════════════════════════
   INIT
   ═══════════════════════════════════════════════════════════ */
renderCurses();
updateStats();
</script>

</body>
</html>
